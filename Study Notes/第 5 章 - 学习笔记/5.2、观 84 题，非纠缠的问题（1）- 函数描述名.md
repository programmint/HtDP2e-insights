学习笔记 / 第5章：添加结构体

<br>

### 5.2、观 84 题，非纠缠的问题 (1) — 函数描述名，该不该有？

<br>

缘起

解 84 题时，有些问题，必须得解开，否则后面的题目，还会继续纠缠。

此时纠缠，胜于后面纠缠不清。

<br>

共有 4 个问题点：

**第1、函数描述名，该不该有? (本篇主题)**  
 
第2、注释之详细程度，该如何？

第3、变量名的语义

第4、代码结构该有意义


<br>

### 5.2.1、问题：
一题目中有多个函数时，为区分不同的函数，给每个函数添加了描述名，以描述其作用。

很快发现不太好，**函数名与目的声明，语义上似乎有重复？**

该不该有这命名呢？
<br><br>

### 5.2.2、示例

```
;; 键盘事件函数 (函数描述名) 
;; 根据输入的按键更新编辑器状态
;; Editor KeyEvent -> Editor

(define (handle-key-event ed key)
  (cond
   [(and (single-char? key) (valid-input? key)) (insert-char ed key)]
   [(and (key=? key "left") (can-move-left? ed)) (move-cursor-left ed)]
   [(and (key=? key "right") (can-move-right? ed)) (move-cursor-right ed)]
   [(and (key=? key "\b") (can-delete? ed)) (delete-char-left ed)]
   [else ed]))
```

<br>

### 5.2.3、讨论：
示例代码中的第一句注释：   

**; 键盘事件函数**   

正是我所谓的函数描述性命名，拿不准，该不该写？
<br><br>

**问 Ai ，答复如下：**

描述函数名这一做法确实值得思考。

我认为这种额外的函数名描述通常是不必要的，原因如下：

**1、冗余信息：** 好的函数命名本身应该清晰表达其用途，如handle-key-event已经表明这是处理按键事件的函数。

**2、增加维护负担：** 每次函数名变更都需同时更新注释。

**3、目的声明已足够：** 如"根据输入的按键更新编辑器状态"这样的目的声明已经清晰说明了函数的作用。

更有效的注释应该关注：

<ul style="padding-left: 0; list-style-position: inside;line-height: 2.0;">
<li>函数的目的（做什么）</li>

<li>函数的前提条件和后置条件（如果有）</li>

<li>特殊情况的处理方式</li>

<li>可能的副作用</li>
</ul>

良好的做法是让函数名自身具有足够的描述性，然后用目的声明来补充说明具体行为和细节。   

如果你觉得需要额外描述函数名，可能意味着函数名本身不够清晰，此时更好的解决方案是改进函数名称。
<br><br>

### 5.2.4、结论
函数描述性命名，确实没有必要。