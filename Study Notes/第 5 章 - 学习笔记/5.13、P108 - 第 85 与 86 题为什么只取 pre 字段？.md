学习笔记 / 第5章：添加结构体

<br>



#### 5.13、P108 - 第 85 与 86 题为什么只取 pre 字段？

这题目的要求，我完全忽视了，直至 Ai 提示我：应该是只取 pre 字段。

明明定义了结构体，可为什么只用 pre 字段？

<br>

Ai 答：

确实，这种设计乍看起来有些反直觉：定义了一个包含两个字段的结构体，却只要求使用其中一个字段作为函数参数。

让我来解释一下为什么课程可能这样设计题目：

**第 1、教学目的：**

这些题目是为了教授结构化程序设计，特别是如何逐步构建更复杂的程序

通过限制初始输入为单一字段，强调了函数设计的最小化原则

**第 2、现实应用类比：**

这类似于现实应用中常见的场景：用户只提供初始文本，程序内部维护更复杂的状态

例如，文本编辑器启动时可能只需要一个文件名或初始文本，但内部会维护光标位置、选择范围等

**第 3、设计策略示范：**

展示了如何从简单输入构建复杂状态

教导学生如何区分"用户提供的数据"和"程序内部状态"

**第 4、职责分离：**

run函数负责创建初始状态，只需要最少的信息（pre字段）

handle-key和其他函数负责状态转换，需要完整的状态信息

这种设计确实容易被忽视，尤其是当你习惯了更直接的编程模式时。但它反映了软件工程中的一个重要原则：函数应该只接收它实际需要的数据，不多也不少。

在这个例子中，run函数只需要知道初始文本是什么，它不需要知道光标后面有什么文本（因为初始状态下光标后面没有文本）。

这种设计虽然乍看有些奇怪，但实际上是一种良好的编程实践，有助于培养更严谨的程序设计思维。

